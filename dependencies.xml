<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="dependencies" default="depend.zm-store">
	<dirname property="dependencies.basedir" file="./" />
	<!-- ================================================================== -->
	<target name="depend.zm-store" depends="depend.zm-common, depend.zm-client, depend.zm-soap, depend.zm-native, depend.zm-charset">
		<delete>
			<fileset dir="${common.jars.dir}" includes="zm-store*.jar,zimbrastore*.jar" />
			<fileset dir="${service.webapp.dir}/WEB-INF/lib/" includes="zm-store*.jar,zimbrastore*.jar" />
			<fileset dir="${zimbra.webapp.dir}/WEB-INF/lib/" includes="zm-store*.jar,zimbrastore*.jar" />
			<fileset dir="${zimbra-admin.webapp.dir}/WEB-INF/lib/" includes="zm-store*.jar,zimbrastore*.jar" />
		</delete>
		<copy verbose="true" todir="${common.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-store/build" includes="zm-store*.jar" />
			<globmapper from="zm-store*.jar" to="zimbrastore.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/zimbra/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-store/build" includes="zm-store*.jar" />
			<globmapper from="zm-store*.jar" to="zimbrastore.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/zimbraAdmin/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-store/build" includes="zm-store*.jar" />
			<globmapper from="zm-store*.jar" to="zimbrastore.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/service/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-store/build" includes="zm-store*.jar" />
			<globmapper from="zm-store*.jar" to="zimbrastore.jar" />
		</copy>
	</target>
	<!-- ================================================================== -->
	<target name="depend.zm-common">
		<ant dir="${dependencies.basedir}/zm-common" inheritAll="false" />
		<delete verbose="true">
			<fileset dir="${common.jars.dir}" includes="zm-common*.jar,zimbracommon*.jar" />
			<fileset dir="${jetty.common.jars.dir}" includes="zm-common*.jar,zimbracommon*.jar" />
		</delete>
		<copy verbose="true" todir="${common.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-common/build" includes="zm-common*.jar" />
			<globmapper from="zm-common*.jar" to="zimbracommon.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.common.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-common/build" includes="zm-common*.jar" />
			<globmapper from="zm-common*.jar" to="zimbracommon.jar" />
		</copy>
	</target>

	<target name="depend.zm-soap" depends="depend.zm-common">
		<ant dir="${dependencies.basedir}/zm-soap" inheritAll="false" />
		<delete verbose="true">
			<fileset dir="${common.jars.dir}" includes="zm-soap*.jar,zimbrasoap*.jar" />
			<fileset dir="${jetty.endorsed.jars.dir}" includes="zm-soap*.jar,zimbrasoap*.jar" />
			<fileset dir="${jetty.webapps.dir}/zimbra/WEB-INF/lib" includes="zm-soap*.jar,zimbrasoap*.jar" />
			<fileset dir="${jetty.webapps.dir}/zimbraAdmin/WEB-INF/lib" includes="zm-soap*.jar,zimbrasoap*.jar" />
			<fileset dir="${jetty.webapps.dir}/service/WEB-INF/lib" includes="zm-soap*.jar,zimbrasoap*.jar" />
		</delete>
		<copy verbose="true" todir="${common.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-soap/build" includes="zm-soap*.jar" />
			<globmapper from="zm-soap*.jar" to="zimbrasoap.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/zimbra/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-soap/build" includes="zm-soap*.jar" />
			<globmapper from="zm-soap*.jar" to="zimbrasoap.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/zimbraAdmin/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-soap/build" includes="zm-soap*.jar" />
			<globmapper from="zm-soap*.jar" to="zimbrasoap.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/service/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-soap/build" includes="zm-soap*.jar" />
			<globmapper from="zm-soap*.jar" to="zimbrasoap.jar" />
		</copy>
	</target>
	<!-- ================================================================== -->
	<target name="depend.zm-client" depends="depend.zm-soap, depend.zm-common">
		<ant dir="${dependencies.basedir}/zm-client" inheritAll="false" />
		<delete>
			<fileset dir="${common.jars.dir}" includes="zm-client*.jar,zimbraclient*.jar" />
			<fileset dir="${jetty.endorsed.jars.dir}" includes="zm-client*.jar,zimbraclient*.jar" />
			<fileset dir="${jetty.webapps.dir}/zimbra/WEB-INF/lib" includes="zm-client*.jar,zimbraclient*.jar" />
			<fileset dir="${jetty.webapps.dir}/zimbraAdmin/WEB-INF/lib" includes="zm-client*.jar,zimbraclient*.jar" />
			<fileset dir="${jetty.webapps.dir}/service/WEB-INF/lib" includes="zm-client*.jar,zimbraclient*.jar" />
		</delete>
		<copy verbose="true" todir="${common.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-client/build" includes="zm-client*.jar" />
			<globmapper from="zm-client*.jar" to="zimbraclient.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/zimbra/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-client/build" includes="zm-client*.jar" />
			<globmapper from="zm-client*.jar" to="zimbraclient.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/zimbraAdmin/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-client/build" includes="zm-client*.jar" />
			<globmapper from="zm-client*.jar" to="zimbraclient.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.webapps.dir}/service/WEB-INF/lib/">
			<fileset dir="${dependencies.basedir}/zm-client/build" includes="zm-client*.jar" />
			<globmapper from="zm-client*.jar" to="zimbraclient.jar" />
		</copy>
	</target>

	<!-- ================================================================== -->
	<target name="depend.zm-charset">
		<ant dir="${dependencies.basedir}/zm-charset" inheritAll="false" />
		<delete>
			<fileset dir="${common.jars.dir}" includes="zm-charset*.jar,zimbra-charset.jar" />
			<fileset dir="${jetty.endorsed.jars.dir}" includes="zm-charset*.jar,zimbra-charset.jar" />
		</delete>
		<copy verbose="true" todir="${common.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-charset/build" includes="zm-charset*.jar" />
			<globmapper from="zm-charset*.jar" to="zimbracharset.jar" />
		</copy>
		<copy verbose="true" todir="${jetty.endorsed.jars.dir}">
			<fileset dir="${dependencies.basedir}/zm-charset/build" includes="zm-charset*.jar" />
			<globmapper from="zm-charset*.jar" to="zimbracharset.jar" />
		</copy>
	</target>

	<!-- ================================================================== -->
	<target name="depend.zm-native">
		<ant dir="${dependencies.basedir}/zm-native" inheritAll="false" />

	</target>
</project>
